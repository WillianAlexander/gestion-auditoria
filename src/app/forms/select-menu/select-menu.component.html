<label for="select" class="block text-sm font-medium text-gray-700 mb-2">
  {{ label }}
</label>
<div [id]="selectId + '-root'" class="relative">
  <button
    type="button"
    class="w-full pl-4 pr-4 py-3 bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 block transition-all duration-200 hover:bg-gray-100 cursor-pointer text-left"
    (click)="toggleDropdown()"
  >
    <div class="flex items-center justify-between">
      <span class="block truncate pr-2">
        {{ selectedOption?.label || placeholder }}
      </span>
      <svg
        viewBox="0 0 16 16"
        fill="currentColor"
        aria-hidden="true"
        class="size-5 text-gray-400 transition-transform duration-200 flex-shrink-0"
        [ngClass]="{ 'rotate-180': isOpen }"
      >
        <path
          d="M5.22 10.22a.75.75 0 0 1 1.06 0L8 11.94l1.72-1.72a.75.75 0 1 1 1.06 1.06l-2.25 2.25a.75.75 0 0 1-1.06 0l-2.25-2.25a.75.75 0 0 1 0-1.06ZM10.78 5.78a.75.75 0 0 1-1.06 0L8 4.06 6.28 5.78a.75.75 0 0 1-1.06-1.06l2.25-2.25a.75.75 0 0 1 1.06 0l2.25 2.25a.75.75 0 0 1 0 1.06Z"
          clip-rule="evenodd"
          fill-rule="evenodd"
        />
      </svg>
    </div>
  </button>

  <ul
    *ngIf="isOpen"
    class="absolute z-10 mt-1 w-full bg-white rounded-lg border border-gray-200 shadow-lg max-h-56 overflow-auto"
  >
    <li
      *ngFor="let option of options"
      (click)="selectOption(option)"
      class="group/option relative block cursor-pointer py-3 px-4 text-gray-900 text-sm select-none hover:bg-blue-50 hover:text-blue-900 border-b border-gray-100 last:border-b-0 transition-colors duration-150"
    >
      <div class="flex items-center justify-between">
        <div class="flex items-center">
          <img
            *ngIf="option.imagen"
            [src]="option.imagen"
            [alt]="option.label"
            class="size-5 shrink-0 rounded-full mr-3"
          />
          <span
            class="block truncate font-normal"
            [ngClass]="{
              'font-semibold text-blue-600':
                option.value === selectedOption?.value
            }"
          >
            {{ option.label }}
          </span>
        </div>
        <span
          *ngIf="option.value === selectedOption?.value"
          class="text-blue-600"
        >
          <svg
            viewBox="0 0 20 20"
            fill="currentColor"
            aria-hidden="true"
            class="size-5"
          >
            <path
              d="M16.704 4.153a.75.75 0 0 1 .143 1.052l-8 10.5a.75.75 0 0 1-1.127.075l-4.5-4.5a.75.75 0 0 1 1.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 0 1 1.05-.143Z"
              clip-rule="evenodd"
              fill-rule="evenodd"
            />
          </svg>
        </span>
      </div>
    </li>
  </ul>
</div>
